{% extends "base.html" %}
{% block title %}{{ args.title }}{% endblock %}
{% block content %}

<h1>{{ args.title }}</h1>

<!-- Ruvin_test -->
<form name="input" action="/statisticsdetails/{{ args.status }}" method="get" data-ajax="false"
      onSubmit="validateForm(this)">
    From: <input type="number" name="start_year" min="{{ args.min_year }}" max="{{ args.max_year }}"
                 value="{{ args.start_year }}">
    To: <input type="number" name="end_year" min="{{ args.min_year }}" max="{{ args.max_year }}"
               value="{{ args.end_year }}">

    <input type="submit" value="Submit">
</form>

<h1>All Publications in {{ args.start_year }} {% if args.start_year != args.end_year %} - {{ args.end_year }}{% endif
    %}</h1>
<!-- Ruvin_test -->

<style type="text/css" title="currentStyle">
    .FixedHeader_Cloned th { background-color: white; }
</style>
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/dataTables.bootstrap.css') }}">
<script type="text/javascript" language="javascript" src="{{ url_for('static', filename='js/jquery.dataTables.js') }}"></script>
<script type="text/javascript" language="javascript" src="{{ url_for('static', filename='js/dataTables.bootstrap.js') }}"></script>
<script type="text/javascript" charset="utf-8" src="{{ url_for('static', filename='js/FixedHeader.js') }}"></script>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        var oTable = $('#example').dataTable();
        new FixedHeader( oTable );
    });
</script>
<script type="text/javascript">

(function(){
  var bsa = document.createElement('script');
     bsa.type = 'text/javascript';
     bsa.async = true;
     bsa.src = '//s3.buysellads.com/ac/bsa.js';
  (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(bsa);
})();

</script>

<div class="table-responsive">

    <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="example">
        <thead>
        <tr>
            {% for column in args.data[0] %}
            <th>{{ column }}</th>
            {% endfor %}
        </tr>
        </thead>

        <tbody>
        {% for row in args.data[1] %}
        <tr>
            {% for data_item in row %}
            <td>{{ data_item }}</td>
            {% endfor %}
        </tr>
        {% endfor %}
        </tbody>
    </table>

</div>

<!-- Ruvin_test -->
<script>
    function validateForm(form) {
        start_year = form["start_year"].value;
        end_year = form["end_year"].value;
        if (end_year < start_year) {
            alert("Invalid date range");
            return false;
        }
        return true;
    }
</script>
<!-- Ruvin_test -->

{% endblock %}
